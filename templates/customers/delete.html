{% extends 'layout.html' %}

{% block content %}
<div class="container">
    <form class="form-light" action="{{url_for('customers.delete', id=id)}}" method="post" onsubmit="return confirm('Do you want to delete this customer?');">
    <h3>Delete customer with id: {{id}}</h3>
        <button class="btn btn-danger" type="submit">Delete</button> 
    </form>

    <form class="form-light" id="delete-form" method="post" action="{{ url_for('customers.delete', id=id) }}">
        <h3>Delete customer with id: {{id}}</h3>
        <button class="btn btn-danger" type="button" onclick="openConfirm()">Delete</button>
    </form>

<div id="confirm-modal" class="modal hidden">
    <div class="modal-content">
        <p>Are you sure you want to delete this customer?</p>
        <button class="btn btn-danger" onclick="submitDelete()">Yes, delete</button>
        <button class="btn btn-secondary" onclick="closeConfirm()">Cancel</button>
    </div>
</div>

</div>

<script>
function openConfirm() {
    // removes the hidden styling, ie makes the modal visible
    document.getElementById("confirm-modal").classList.remove("hidden");
}

function closeConfirm() {
    // puts back the hidden styling, ie makes it invisible
    document.getElementById("confirm-modal").classList.add("hidden");
}

function submitDelete() {
    // We use JS to submit the form
    document.getElementById("delete-form").submit();
}
</script>

<style>
    .modal {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.5);
    /* We place the modal in the center of the screen */
    display: flex;
    align-items: center;
    justify-content: center;
}

/* We make the popup button white with rounded corners */
.modal-content {
    background: white;
    padding: 1.5rem;
    border-radius: 6px;
    text-align: center;
}

/* We use this to toggle visibility by adding/removing the class */
.hidden {
    display: none;
}
</style>

{% endblock %}